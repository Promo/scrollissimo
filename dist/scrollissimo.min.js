/**
 * Scrollissimo
 * Javascript plugin for smooth scroll-controlled animations
 * @version 0.3.1
 * @author frux <qdinov@yandex.ru>
 * @url https://github.com/Promo/scrollissimo
 */
!function(t,e){function i(){if("undefined"!=typeof pageYOffset)return pageYOffset;var e=t.body,i=t.documentElement;return i=i.clientHeight?i:e,i.scrollTop}function n(){var e=t.body,i=t.documentElement;return Math.max(e.scrollHeight,i.scrollHeight,e.offsetHeight,i.offsetHeight,e.clientHeight,i.clientHeight)}function s(){return isNaN(e.innerHeight)?e.clientHeight:e.innerHeight}var r,o,a,h={},u=0,m=[],c=[];!function(){var t,i=["ms","moz","webkit","o"],n=i.length;if(e.requestAnimationFrame)e._rAF=e.requestAnimationFrame;else{for(t=0;n>t&&!e.requestAnimationFrame;t+=1)e._rAF=e[i[t]+"RequestAnimationFrame"]&&e[i[t]+"RequestAnimationFrame"];!e._rAF&&(e._rAF=function(t){return setTimeout(function(){t()},1e3/60)})}}(),h._getIntersection=function(t,e,i,n){var s,r,o=Math.min(i,n),a=Math.max(i,n),h=t,u=e;if(h>=o&&a>=h)s=h,r=Math.min(a,u);else if(a>=u&&u>=o)s=Math.max(o,h),r=Math.min(a,u);else{if(!(o>=h&&u>=a))return;s=o,r=a}return n>i?{from:s,to:r}:{from:r,to:s}},h._toPercents=function(t,e){return e=e||a||n(),"string"==typeof t?"%"===t.substr(-1,1)?parseFloat(t)/100:"px"===t.substr(-2,2)?parseFloat(t)/e:parseFloat(t)/e:isNaN(t)?void 0:t/e},r=function(t,e,i){t&&(this.params={},this.params.start=h._toPercents(e||0),this.params.duration=h._toPercents(t.duration()||0),this.timeline=t,isNaN(i)||(this._maxSpeed=.001*i,this._smoother=new r.Smoother(this,this._maxSpeed)))},r.prototype.getIntersection=function(t,e){return h._getIntersection(this.params.start,this.params.start+this.params.duration,t,e)},r.prototype.render=function(t){var e=Math.round((t-this.params.start)/this.params.duration*1e3)/1e3,i=this.timeline.duration()*e;return this.timeline.seek(i),this},r.Smoother=function(t,e){this.status="idle",this.animateFrom=0,this.animateTo=0,this.maxSpeed=+e,this.queue=t},r.Smoother.prototype.smooth=function(t,i){var n=this.queue.getIntersection(t,i);return n?(this.animateTo=n.to,"idle"===this.status&&(this.status="busy",this.id=e._rAF(this.step.bind(this))),this):void 0},r.Smoother.prototype.step=function(){var t=this.animateTo-this.animateFrom;Math.abs(t)>this.maxSpeed?(this.queue.render(this.animateFrom+=this.maxSpeed*(t>0?1:-1)),e._rAF(this.step.bind(this))):(this.queue.render(this.animateTo),this.status="idle",this.animateFrom=this.animateTo)},h.add=function(t,e,i){isNaN(i)?c.push(new r(t,e,i)):m.push(new r(t,e,i))},h._render=function(t){c.forEach(function(e){e.render(t)}),m.forEach(function(e){e._smoother.smooth(h._lastProgress,t)}),h._lastProgress=t}.bind(h),h._lastProgress=0,h._catch=function(t){var e=isNaN(t)?i():t,n=e/(a-o);this._render(n),u=e},h.knock=function(t){this._catch(t),isNaN(t)&&setTimeout(this._catch.bind(this),100)},h.isTouchMode="ontouchstart"in e,e.addEventListener("load",function(){a=n(),o=s()}),(module||{}).exports?module.exports=h:e.Scrollissimo=h}(document,window);